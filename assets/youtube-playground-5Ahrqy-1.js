import{u as f,d as v,e as g,r as m,o as d,c as p,w,v as x,g as y,F as S,p as T,q as k,s as C,t as F}from"./index-BOOOFJ57.js";function b(r){return typeof r=="function"?r():f(r)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _=()=>{};function P(r,n){function t(...e){return new Promise((a,s)=>{Promise.resolve(r(()=>n.apply(this,e),{fn:n,thisArg:this,args:e})).then(a).catch(s)})}return t}function D(r,n={}){let t,e,a=_;const s=i=>{clearTimeout(i),a(),a=_};return i=>{const o=b(r),l=b(n.maxWait);return t&&s(t),o<=0||l!==void 0&&l<=0?(e&&(s(e),e=null),Promise.resolve(i())):new Promise((c,u)=>{a=n.rejectOnCancel?u:c,l&&!e&&(e=setTimeout(()=>{t&&s(t),e=null,c(i())},l)),t=setTimeout(()=>{e&&s(e),e=null,c(i())},o)})}}function V(r,n=200,t={}){return P(D(n,t),r)}const W={class:"flex flex-col gap-3"},j=y("h2",{class:"text-xl font-bold"},"Youtube Playground",-1),B=["disabled"],G={key:0},$={key:1},q={key:2},N=["url"],Y=v({__name:"youtube-playground",setup(r){const n=g(),t=m(""),e=m(""),a=m(!1),s=m([]),h=V(async()=>{var i;a.value=!0;try{const o=await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key=${(i=n.userSession)==null?void 0:i.idClient}&q=${t.value}`);s.value=(await o.json()).items.map(l=>({...l.snippet,...l.id})),console.log(s.value)}catch(o){console.error(o),e.value=o}finally{a.value=!1}},1e3);return(i,o)=>{var l,c;return d(),p("div",W,[j,w(y("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=u=>t.value=u),placeholder:"Search",class:"h-8",onInput:o[1]||(o[1]=(...u)=>f(h)&&f(h)(...u)),disabled:!((l=f(n).userSession)!=null&&l.idClient)},null,40,B),[[x,t.value]]),(c=f(n).userSession)!=null&&c.idClient?a.value?(d(),p("div",$,"Recherche...")):(d(),p("div",q,[(d(!0),p(S,null,T(s.value,u=>(d(),p("div",null,[y("div",{url:u.thumbnails.default.url,class:"h-24 w-32 bg-no-repeat bg-center",style:k(`background-image: url('${u.thumbnails.default.url}')`)},null,12,N),C(" "+F(u.title),1)]))),256))])):(d(),p("div",G,"You are not allowed to perform a youtube search"))])}}});export{Y as default};
